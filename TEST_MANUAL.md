# Ramat - 動作テスト指示書

**最終更新**: 2025-12-13  
**プロジェクト**: Ramat（ソウルメイト生成アプリ）  
**対象環境**: 本番環境（https://ramat.pages.dev）

---

## 📋 目次

1. [テスト環境・準備](#テスト環境準備)
2. [テストアカウント](#テストアカウント)
3. [テストケース一覧](#テストケース一覧)
4. [詳細テスト手順](#詳細テスト手順)
5. [不具合報告方法](#不具合報告方法)
6. [チェックリスト](#チェックリスト)

---

## テスト環境・準備

### **テスト対象URL**
```
本番環境: https://ramat.pages.dev
```

### **推奨ブラウザ**
- ✅ **Google Chrome**（最新版）- 推奨
- ✅ **Safari**（最新版）
- ⚠️ Firefox（動作確認済みだが推奨外）

### **推奨デバイス**
- 📱 **スマートフォン**（iPhone/Android）- メインターゲット
- 💻 **PC**（デスクトップ/ノートPC）

### **事前準備**
1. ブラウザのキャッシュをクリア（Ctrl+Shift+Delete / Cmd+Shift+Delete）
2. プライベートモード/シークレットモードでテスト推奨
3. 安定したインターネット接続を確認
4. スクリーンショット撮影ツールを準備（不具合報告用）

---

## テストアカウント

### **テスト用アカウント（3種類）**

#### **1. デモアカウント**
```
メールアドレス: demo@ramat.app
パスワード: Demo1234
```
- **用途**: 基本機能テスト
- **特徴**: すでにソウルメイトが生成済み

#### **2. テストアカウント**
```
メールアドレス: test@ramat.app
パスワード: Test1234
```
- **用途**: 通常ユーザーとしてのテスト
- **特徴**: チャット履歴あり

#### **3. 管理者アカウント**
```
メールアドレス: admin@ramat.app
パスワード: Admin1234
```
- **用途**: 管理者機能テスト
- **特徴**: 管理者ダッシュボードへのアクセス可能

### **新規アカウント作成テスト用**
- 任意のメールアドレスとパスワードで新規登録可能
- パスワード要件: 8文字以上、英数字含む

---

## テストケース一覧

### **優先度：高（Critical）**
| No | テスト項目 | 期待結果 |
|----|----------|---------|
| 1 | 新規登録 | アカウント作成成功、自動ログイン |
| 2 | ログイン | ログイン成功、チャットページへ遷移 |
| 3 | ソウルメイト生成 | 3フェーズ完了、画像・プロフィール表示 |
| 4 | チャットメッセージ送信 | 返信が2-5秒以内に表示 |
| 5 | ログアウト | ログアウト成功、ログインページへ遷移 |

### **優先度：中（High）**
| No | テスト項目 | 期待結果 |
|----|----------|---------|
| 6 | マイページ表示 | プロフィール・統計情報表示 |
| 7 | 壁紙生成（ストア） | スマホ・PC用壁紙生成成功 |
| 8 | ナビゲーションメニュー | 全ページで表示、遷移可能 |
| 9 | レスポンシブデザイン | スマホ・PC両方で適切に表示 |
| 10 | 管理者ダッシュボード | 統計・グラフ表示、管理機能動作 |

### **優先度：低（Medium）**
| No | テスト項目 | 期待結果 |
|----|----------|---------|
| 11 | お問い合わせフォーム | 送信成功、確認メッセージ表示 |
| 12 | プライバシーポリシー | ページ表示、内容確認 |
| 13 | 利用規約 | ページ表示、内容確認 |
| 14 | Google OAuth | Googleアカウントでログイン成功 |
| 15 | データエクスポート | JSON形式でダウンロード可能 |

---

## 詳細テスト手順

### **Test Case 1: 新規登録**

#### **前提条件**
- ブラウザを開いている
- https://ramat.pages.dev にアクセス

#### **テスト手順**
1. ランディングページの「無料で始める」ボタンをクリック
2. 「新規登録はこちら」リンクをクリック
3. 以下の情報を入力：
   - メールアドレス: `test-{日時}@example.com`（例: test-20251213@example.com）
   - パスワード: `Test1234`
   - パスワード（確認）: `Test1234`
4. 「登録する」ボタンをクリック

#### **期待結果**
- ✅ 登録成功メッセージが表示される
- ✅ 自動的にログインされる
- ✅ チャットページ（`/chat`）に遷移する
- ✅ 「ソウルメイトを呼ぶ」ボタンが表示される

#### **確認ポイント**
- [ ] エラーメッセージが表示されない
- [ ] ページが正常に遷移する
- [ ] ナビゲーションメニューが表示される
- [ ] 「ログアウト」ボタンが表示される

---

### **Test Case 2: ログイン**

#### **前提条件**
- ブラウザを開いている
- https://ramat.pages.dev にアクセス

#### **テスト手順**
1. ランディングページの「ログイン」ボタンをクリック
2. 以下の情報を入力：
   - メールアドレス: `demo@ramat.app`
   - パスワード: `Demo1234`
3. 「ログイン」ボタンをクリック

#### **期待結果**
- ✅ ログイン成功
- ✅ チャットページ（`/chat`）に遷移
- ✅ ソウルメイトのプロフィールが表示される

#### **確認ポイント**
- [ ] エラーメッセージが表示されない
- [ ] 2秒以内にページ遷移する
- [ ] ソウルメイトの名前・画像が表示される

---

### **Test Case 3: ソウルメイト生成**

#### **前提条件**
- 新規登録したアカウントでログイン済み
- チャットページ（`/chat`）を開いている

#### **テスト手順**
1. 「ソウルメイトを呼ぶ」ボタンをクリック
2. モーダルが表示されるのを待つ
3. **Phase 1: 動物と名前の選定**を観察（3-5秒）
4. **Phase 2: プロフィール生成**を観察（5-10秒）
5. **Phase 3: 画像生成**を観察（10-20秒）
6. 生成完了後、プロフィールが表示されるのを確認

#### **期待結果**
- ✅ 3つのフェーズが順番に進行する
- ✅ ローディングアニメーションが表示される
- ✅ 合計20-40秒で生成完了
- ✅ 以下が表示される：
  - ソウルメイトの名前
  - コンセプト
  - 性格
  - 口調（サンプルセリフ）
  - キャラクター画像（カワイイイラスト）
- ✅ 自動的に挨拶メッセージが表示される

#### **確認ポイント**
- [ ] 各フェーズでエラーが発生しない
- [ ] 画像が正しく表示される（壊れた画像アイコンが表示されない）
- [ ] プロフィール情報が完全に表示される
- [ ] モーダルが自動的に閉じる

#### **スクリーンショット撮影ポイント**
- Phase 1のローディング画面
- Phase 3の画像生成中画面
- 生成完了後のプロフィール画面

---

### **Test Case 4: チャットメッセージ送信**

#### **前提条件**
- `demo@ramat.app`でログイン済み
- チャットページ（`/chat`）を開いている
- ソウルメイトが生成済み

#### **テスト手順**
1. チャット入力欄に「こんにちは」と入力
2. 送信ボタン（紙飛行機アイコン）をクリック
3. ソウルメイトの返信を待つ（2-5秒）
4. 返信が表示されることを確認
5. 続けて「今日はいい天気だね」と送信
6. 再度返信を待つ

#### **期待結果**
- ✅ 送信したメッセージが即座に表示される
- ✅ 2-5秒以内にソウルメイトの返信が表示される
- ✅ 返信は2-3文程度
- ✅ 絵文字が含まれている
- ✅ 質問形式または会話を促す内容
- ✅ メッセージが自動スクロールされる

#### **確認ポイント**
- [ ] 送信ボタンが無効化されない
- [ ] 返信が5秒以内に表示される
- [ ] タイピングインジケーター（「...」）が表示される
- [ ] チャット履歴が正しく保存される（リロード後も表示される）

#### **テスト例文**
以下のメッセージを順番に送信し、適切な返信が返ってくることを確認：
1. 「おはよう」
2. 「今日はちょっと疲れてる」
3. 「仕事が大変で…」
4. 「ありがとう、話を聞いてくれて」
5. 「おやすみ」

---

### **Test Case 5: ログアウト**

#### **前提条件**
- 任意のアカウントでログイン済み
- 任意のページを開いている

#### **テスト手順**
1. ナビゲーションメニュー（画面下部）の「🚪 ログアウト」ボタンをクリック
2. 確認ダイアログが表示される
3. 「OK」ボタンをクリック

#### **期待結果**
- ✅ 確認ダイアログが表示される（「ログアウトしますか？」）
- ✅ ログアウト成功
- ✅ ログインページ（`/login`）に自動遷移
- ✅ 再度アクセスするとログインが必要になる

#### **確認ポイント**
- [ ] 確認ダイアログが表示される
- [ ] キャンセルを選択するとログアウトしない
- [ ] ログアウト後、保護されたページ（/chat, /mypage等）にアクセスできない

---

### **Test Case 6: マイページ表示**

#### **前提条件**
- `demo@ramat.app`でログイン済み

#### **テスト手順**
1. ナビゲーションメニューから「マイページ」をクリック
2. マイページ（`/mypage`）が表示される
3. 各セクションを確認

#### **期待結果**
- ✅ 以下のセクションが表示される：
  1. **プロフィールカード**
     - ソウルメイトの名前
     - キャラクター画像
     - コンセプト
     - 性格
     - 口調
  2. **統計情報**
     - チャット回数
     - 出会ってからの日数
  3. **設定メニュー**
     - データエクスポート
     - データ削除

#### **確認ポイント**
- [ ] すべての情報が正しく表示される
- [ ] 画像が正しく表示される
- [ ] 統計情報が0以上の数値

---

### **Test Case 7: 壁紙生成（ストア）**

#### **前提条件**
- `demo@ramat.app`でログイン済み
- ソウルメイトが生成済み

#### **テスト手順**
1. ナビゲーションメニューから「ストア」をクリック
2. ストアページ（`/store`）が表示される
3. 「壁紙を生成する」ボタンをクリック
4. 生成中のローディングを観察（60-120秒）
5. 生成完了後、壁紙が表示される

#### **期待結果**
- ✅ スマホ用（9:16）とPC用（16:9）の2種類が生成される
- ✅ 生成時間は1-2分程度
- ✅ 以下が表示される：
  - スマホ用壁紙のプレビュー
  - PC用壁紙のプレビュー
  - ダウンロードボタン
- ✅ ダウンロードボタンをクリックすると画像がダウンロードされる

#### **確認ポイント**
- [ ] 生成エラーが発生しない
- [ ] 画像が正しく表示される
- [ ] ダウンロードが正常に動作する
- [ ] 再生成しても以前の壁紙が表示される（キャッシュ）

#### **注意事項**
⚠️ 壁紙生成は時間がかかるため、忍耐強く待つ必要があります

---

### **Test Case 8: ナビゲーションメニュー**

#### **前提条件**
- 任意のアカウントでログイン済み

#### **テスト手順**
1. チャットページを開く
2. ナビゲーションメニュー（画面下部）を確認
3. 各メニューを順番にクリック

#### **期待結果**
- ✅ 以下のメニューが表示される：
  - 🏠 ホーム（`/`）
  - 💬 チャット（`/chat`）
  - 🖼️ ストア（`/store`）
  - 👤 マイページ（`/mypage`）
  - 🚪 ログアウト
  - 👑 管理者（管理者アカウントのみ）

#### **確認ポイント**
- [ ] すべてのメニューが表示される
- [ ] クリックすると正しいページに遷移する
- [ ] 現在のページがハイライト表示される
- [ ] ログアウトボタンは赤色で表示される

---

### **Test Case 9: レスポンシブデザイン**

#### **前提条件**
- ブラウザを開いている

#### **テスト手順（PC）**
1. PC（デスクトップ/ノートPC）でブラウザを開く
2. ウィンドウサイズを変更（最小化 → 最大化）
3. 各ページ（ランディング、チャット、マイページ）を確認

#### **テスト手順（スマートフォン）**
1. スマートフォンでブラウザを開く
2. 各ページを確認
3. 縦向き・横向きの両方で確認

#### **期待結果**
- ✅ **PC表示**:
  - レイアウトが横長に最適化される
  - メニューが適切に配置される
  - 文字サイズが読みやすい
- ✅ **スマホ表示**:
  - レイアウトが縦長に最適化される
  - タップしやすいボタンサイズ
  - スクロールがスムーズ
  - ナビゲーションメニューが画面下部に固定

#### **確認ポイント**
- [ ] レイアウトが崩れない
- [ ] テキストが画面外にはみ出さない
- [ ] ボタンが重ならない
- [ ] 画像が適切にリサイズされる

---

### **Test Case 10: 管理者ダッシュボード**

#### **前提条件**
- `admin@ramat.app`でログイン済み

#### **テスト手順**
1. ナビゲーションメニューから「👑 管理者」をクリック
2. 管理者ダッシュボード（`/admin`）が表示される
3. 各セクションを確認

#### **期待結果**
- ✅ 以下のセクションが表示される：
  1. **統計カード**
     - 総ユーザー数
     - 総ソウルメイト数
     - 総チャット数
     - アクティブユーザー数
  2. **週間グラフ**
     - ユーザー登録数（過去7日間）
     - ソウルメイト生成数（過去7日間）
  3. **生成履歴テーブル**
     - ユーザーID
     - ソウルメイト名
     - 動物
     - 生成日時

#### **確認ポイント**
- [ ] すべての統計が表示される
- [ ] グラフが正しく描画される
- [ ] テーブルにデータが表示される
- [ ] リアルタイムで更新される（ページリロードで最新データ）

---

### **Test Case 11: お問い合わせフォーム**

#### **前提条件**
- 任意の状態（ログイン不要）

#### **テスト手順**
1. フッターまたはメニューから「お問い合わせ」をクリック
2. お問い合わせフォーム（`/contact`）が表示される
3. 以下の情報を入力：
   - 名前: `テストユーザー`
   - メールアドレス: `test@example.com`
   - 件名: `動作テスト`
   - メッセージ: `これは動作テストです。`
4. 「送信する」ボタンをクリック

#### **期待結果**
- ✅ 送信成功メッセージが表示される
- ✅ フォームがクリアされる
- ✅ 管理者にメール通知が送信される（確認不要）

#### **確認ポイント**
- [ ] 必須フィールドの検証が動作する
- [ ] メールアドレスの形式検証が動作する
- [ ] 送信エラーが発生しない

---

### **Test Case 12-13: 静的ページ**

#### **テスト手順**
1. フッターから以下のリンクをクリック：
   - プライバシーポリシー（`/privacy`）
   - 利用規約（`/terms`）
   - 特定商取引法（`/legal`）
2. 各ページが表示されることを確認

#### **期待結果**
- ✅ ページが正しく表示される
- ✅ テキストが読みやすい
- ✅ レイアウトが崩れていない

---

### **Test Case 14: Google OAuth**

#### **前提条件**
- Googleアカウントを持っている

#### **テスト手順**
1. ログインページを開く
2. 「Googleでログイン」ボタンをクリック
3. Googleの認証画面で認証する
4. Ramatに戻る

#### **期待結果**
- ✅ Google認証画面が開く
- ✅ 認証後、Ramatに戻る
- ✅ 自動的にログインされる
- ✅ チャットページに遷移する

#### **確認ポイント**
- [ ] 認証エラーが発生しない
- [ ] リダイレクトが正しく動作する

---

### **Test Case 15: データエクスポート**

#### **前提条件**
- 任意のアカウントでログイン済み
- マイページを開いている

#### **テスト手順**
1. マイページの設定セクションで「データをエクスポート」をクリック
2. JSON形式のファイルがダウンロードされる

#### **期待結果**
- ✅ `ramat-data-{日時}.json`ファイルがダウンロードされる
- ✅ ファイルに以下の情報が含まれる：
  - ソウルメイトプロフィール
  - チャット履歴
  - 統計情報

#### **確認ポイント**
- [ ] ダウンロードが正常に完了する
- [ ] JSONファイルが有効な形式
- [ ] データが正しく含まれている

---

## 不具合報告方法

### **報告先**
不具合を発見した場合は、以下の方法で報告してください：

#### **1. GitHubイシュー（推奨）**
```
https://github.com/tyoshida-wq/ramat/issues
```

#### **2. お問い合わせフォーム**
```
https://ramat.pages.dev/contact
```

### **報告テンプレート**

```markdown
## 不具合報告

### テストケース番号
Test Case X: [テスト名]

### 発生環境
- **ブラウザ**: Chrome 120.0.0.0
- **デバイス**: iPhone 14 Pro / Windows 11 PC
- **OS**: iOS 17.2 / Windows 11
- **画面サイズ**: 390x844 / 1920x1080

### 再現手順
1. [手順1]
2. [手順2]
3. [手順3]

### 期待結果
[本来どうなるべきか]

### 実際の結果
[実際に何が起こったか]

### スクリーンショット
[添付]

### エラーメッセージ
```
[コンソールエラーがあれば記載]
```

### 重要度
- [ ] Critical（アプリが使えない）
- [ ] High（主要機能が動作しない）
- [ ] Medium（一部機能に問題）
- [ ] Low（軽微な表示崩れ等）

### 補足情報
[その他気づいた点]
```

---

## チェックリスト

### **テスト実施チェックリスト**

#### **基本機能（必須）**
- [ ] Test Case 1: 新規登録
- [ ] Test Case 2: ログイン
- [ ] Test Case 3: ソウルメイト生成
- [ ] Test Case 4: チャットメッセージ送信
- [ ] Test Case 5: ログアウト

#### **主要機能**
- [ ] Test Case 6: マイページ表示
- [ ] Test Case 7: 壁紙生成
- [ ] Test Case 8: ナビゲーションメニュー
- [ ] Test Case 9: レスポンシブデザイン
- [ ] Test Case 10: 管理者ダッシュボード

#### **補助機能**
- [ ] Test Case 11: お問い合わせフォーム
- [ ] Test Case 12: プライバシーポリシー
- [ ] Test Case 13: 利用規約
- [ ] Test Case 14: Google OAuth
- [ ] Test Case 15: データエクスポート

#### **デバイス・ブラウザ**
- [ ] Chrome（PC）
- [ ] Chrome（スマホ）
- [ ] Safari（iPhone）
- [ ] Safari（Mac）
- [ ] Edge（PC）

#### **画面サイズ**
- [ ] スマートフォン（375px-428px）
- [ ] タブレット（768px-1024px）
- [ ] PC（1280px-1920px）

---

## テスト完了後の報告

### **テスト結果サマリー**

```markdown
## テスト結果サマリー

**テスト実施日**: 2025-XX-XX  
**テスター**: [氏名]  
**テスト環境**: [ブラウザ/デバイス]

### 実施テストケース
- 合計: XX件
- 成功: XX件
- 失敗: XX件
- スキップ: XX件

### 発見された不具合
1. [不具合1の概要]（重要度: Critical/High/Medium/Low）
2. [不具合2の概要]（重要度: Critical/High/Medium/Low）

### 総合評価
- [ ] リリース可能
- [ ] 修正後リリース可能
- [ ] 重大な問題あり、リリース不可

### コメント
[全体的な感想、気づいた点など]
```

---

## 参考資料

### **関連ドキュメント**
- [README.md](https://github.com/tyoshida-wq/ramat/blob/main/README.md) - プロジェクト概要
- [REQUIREMENTS.md](https://github.com/tyoshida-wq/ramat/blob/main/REQUIREMENTS.md) - 要件定義書
- [PROMPTS.md](https://github.com/tyoshida-wq/ramat/blob/main/PROMPTS.md) - AIプロンプト一覧

### **よくある質問（FAQ）**

#### **Q1: 画像生成に失敗します**
A: Gemini APIの制限により、まれに失敗することがあります。ページをリロードして再度お試しください。

#### **Q2: チャットの返信が遅いです**
A: Gemini APIの応答時間により、2-5秒かかることがあります。5秒以上待っても返信がない場合は不具合報告してください。

#### **Q3: ログアウトボタンが表示されません**
A: ブラウザのキャッシュをクリアして、ページをハードリロード（Ctrl+Shift+R / Cmd+Shift+R）してください。

#### **Q4: 壁紙生成が途中で止まります**
A: 生成には1-2分かかります。タイムアウトした場合は不具合報告してください。

---

## 付録：スクリーンショット撮影ガイド

### **撮影推奨箇所**
1. ソウルメイト生成完了画面
2. チャット画面（会話中）
3. マイページのプロフィールカード
4. 壁紙生成完了画面
5. 管理者ダッシュボード

### **撮影方法**
- **Windows**: Win + Shift + S
- **Mac**: Cmd + Shift + 4
- **iPhone**: 音量上 + 電源ボタン
- **Android**: 音量下 + 電源ボタン

---

**テスト指示書の最終更新**: 2025-12-13  
**質問・不明点**: お問い合わせフォームまたはGitHubイシューへ

---

**お疲れ様でした！テストご協力ありがとうございます。** 🙏
